<!DOCTYPE html>
<html lang="uk">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–µ–Ω—é - –°—É—à—ñ-–ú–∞–π—Å—Ç–µ—Ä</title>
    <link rel="stylesheet" href="/front/css/styles.css">
    <link rel="icon" type="image/x-icon" href="/front/images/favicon.ico">
</head>

<body>
    <div id="header-placeholder"></div>

    <main class="menu-page">
        <section class="menu-hero">
            <h1>–ù–∞—à–µ –º–µ–Ω—é</h1>
            <p class="subtitle">–°–º–∞—á–Ω—ñ —Å—É—à—ñ —Ç–∞ —Ä–æ–ª–∏ –≤—ñ–¥ –Ω–∞—à–∏—Ö —à–µ—Ñ—ñ–≤</p>
        </section>

        <section class="menu-content">
            <div class="menu-filters">
                <button class="filter-btn active" data-category="all">–í—Å—ñ</button>
                <button class="filter-btn" data-category="rolls">–†–æ–ª–∏</button>
                <button class="filter-btn" data-category="sushi">–°—É—à—ñ</button>
                <button class="filter-btn" data-category="sets">–°–µ—Ç–∏</button>
                <button class="filter-btn" data-category="drinks">–ù–∞–ø–æ—ó</button>
            </div>

            <div class="menu-grid" id="menuGrid">
                <!-- –¢—É—Ç –±—É–¥—É—Ç—å –µ–ª–µ–º–µ–Ω—Ç–∏ –º–µ–Ω—é -->
            </div>
        </section>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>–ö–æ–Ω—Ç–∞–∫—Ç–∏</h3>
                <p>üìû +380 44 123 4567</p>
                <p>‚úâÔ∏è info@sushi-master.ua</p>
                <p>üìç –≤—É–ª. –°—É—à–∏—Å—Ç–∞, 1, –º. –ö–∏—ó–≤</p>
            </div>
            <div class="footer-section">
                <h3>–ì—Ä–∞—Ñ—ñ–∫ —Ä–æ–±–æ—Ç–∏</h3>
                <p>–ü–Ω-–ü—Ç: 10:00 - 22:00</p>
                <p>–°–±-–ù–¥: 11:00 - 23:00</p>
            </div>
            <div class="footer-section">
                <h3>–°–ª—ñ–¥–∫—É–π—Ç–µ –∑–∞ –Ω–∞–º–∏</h3>
                <div class="social-links">
                    <a href="#" class="social-link">Facebook</a>
                    <a href="#" class="social-link">Instagram</a>
                    <a href="#" class="social-link">Telegram</a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 –°—É—à—ñ-–ú–∞–π—Å—Ç–µ—Ä. –í—Å—ñ –ø—Ä–∞–≤–∞ –∑–∞—Ö–∏—â–µ–Ω—ñ.</p>
        </div>
    </footer>

    <script type="module">
        import { menuService } from '/front/js/api.js';

        fetch('/front/components/header.html')
            .then(r => r.text())
            .then(html => {
                document.getElementById('header-placeholder').innerHTML = html;
                import('/front/js/main.js');
            });

        // –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –º–µ–Ω—é
        const filterButtons = document.querySelectorAll('.filter-btn');
        const menuGrid = document.getElementById('menuGrid');

        filterButtons.forEach(button => {
            button.addEventListener('click', () => {
                // –í–∏–¥–∞–ª—è—î–º–æ –∞–∫—Ç–∏–≤–Ω–∏–π –∫–ª–∞—Å –∑ —É—Å—ñ—Ö –∫–Ω–æ–ø–æ–∫
                filterButtons.forEach(btn => btn.classList.remove('active'));
                // –î–æ–¥–∞—î–º–æ –∞–∫—Ç–∏–≤–Ω–∏–π –∫–ª–∞—Å –Ω–∞—Ç–∏—Å–Ω—É—Ç—ñ–π –∫–Ω–æ–ø—Ü—ñ
                button.classList.add('active');

                const category = button.dataset.category;
                const menuItems = document.querySelectorAll('.menu-item');

                // –§—ñ–ª—å—Ç—Ä—É—î–º–æ –µ–ª–µ–º–µ–Ω—Ç–∏ –º–µ–Ω—é
                menuItems.forEach(item => {
                    if (category === 'all' || item.dataset.category === category) {
                        item.style.display = 'block';
                    } else {
                        item.style.display = 'none';
                    }
                });
            });
        });

        // –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–µ–Ω—é
        async function loadMenu() {
            try {
                const menuItems = await menuService.getMenuItems();
                if (menuGrid) {
                    menuGrid.innerHTML = menuItems.map(item => `
                        <div class="menu-item" data-category="${item.category}">
                            <img src="${item.imageUrl}" alt="${item.name}" class="menu-item-image">
                            <div class="menu-item-content">
                                <h3>${item.name}</h3>
                                <p class="description">${item.description}</p>
                                <div class="menu-item-footer">
                                    <span class="price">${item.price} ‚Ç¥</span>
                                    <button class="btn btn-primary add-to-cart" data-id="${item.id}">
                                        –î–æ–¥–∞—Ç–∏ –≤ –∫–æ—à–∏–∫
                                    </button>
                                </div>
                            </div>
                        </div>
                    `).join('');

                    // –î–æ–¥–∞—î–º–æ –æ–±—Ä–æ–±–Ω–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ "–î–æ–¥–∞—Ç–∏ –≤ –∫–æ—à–∏–∫"
                    document.querySelectorAll('.add-to-cart').forEach(button => {
                        button.addEventListener('click', () => {
                            const itemId = button.dataset.id;
                            const item = menuItems.find(i => i.id === parseInt(itemId));
                            if (item) {
                                addToCart(item);
                            }
                        });
                    });
                }
            } catch (error) {
                console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–µ–Ω—é:', error);
                showMessage('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–µ–Ω—é. –°–ø—Ä–æ–±—É–π—Ç–µ –æ–Ω–æ–≤–∏—Ç–∏ —Å—Ç–æ—Ä—ñ–Ω–∫—É.', 'error');
            }
        }

        // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è —Ç–æ–≤–∞—Ä—É –≤ –∫–æ—à–∏–∫
        function addToCart(item) {
            let cart = JSON.parse(localStorage.getItem('cart') || '[]');
            const existingItem = cart.find(i => i.id === item.id);

            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    id: item.id,
                    name: item.name,
                    price: item.price,
                    quantity: 1
                });
            }

            localStorage.setItem('cart', JSON.stringify(cart));
            showMessage('–¢–æ–≤–∞—Ä –¥–æ–¥–∞–Ω–æ –¥–æ –∫–æ—à–∏–∫–∞', 'success');
        }

        // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –ø–æ–∫–∞–∑—É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
        function showMessage(message, type) {
            const modal = document.createElement('div');
            modal.className = `modal show ${type}`;
            modal.innerHTML = `
                <div class="modal-content">
                    <p>${message}</p>
                    <button class="btn btn-primary" onclick="this.parentElement.parentElement.remove()">OK</button>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ –º–µ–Ω—é –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
        loadMenu();
    </script>
</body>

</html>