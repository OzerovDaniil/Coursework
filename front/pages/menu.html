<!DOCTYPE html>
<html lang="uk">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–µ–Ω—é - –°—É—à—ñ-–ú–∞–π—Å—Ç–µ—Ä</title>
    <link rel="stylesheet" href="/front/css/styles.css">
    <link rel="icon" type="image/x-icon" href="/front/images/favicon.ico">
</head>

<body>
    <div id="header-placeholder"></div>

    <main class="menu-page">
        <section class="menu-hero">
            <h1>–ù–∞—à–µ –º–µ–Ω—é</h1>
            <p class="subtitle">–°–º–∞—á–Ω—ñ —Å—É—à—ñ —Ç–∞ —Ä–æ–ª–∏ –≤—ñ–¥ –Ω–∞—à–∏—Ö —à–µ—Ñ—ñ–≤</p>
        </section>

        <section class="menu-content">
            <div class="menu-filters">
                <button class="filter-btn active" data-category="all">–í—Å—ñ</button>
                <button class="filter-btn" data-category="rolls">–†–æ–ª–∏</button>
                <button class="filter-btn" data-category="sushi">–°—É—à—ñ</button>
                <button class="filter-btn" data-category="sets">–°–µ—Ç–∏</button>
                <button class="filter-btn" data-category="drinks">–ù–∞–ø–æ—ó</button>
            </div>

            <div class="menu-grid" id="menuGrid">
                <!-- Menu items will be loaded here -->
            </div>
        </section>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>–ö–æ–Ω—Ç–∞–∫—Ç–∏</h3>
                <p>üìû +380 44 123 4567</p>
                <p>‚úâÔ∏è info@sushi-master.ua</p>
                <p>üìç –≤—É–ª. –°—É—à–∏—Å—Ç–∞, 1, –º. –ö–∏—ó–≤</p>
            </div>
            <div class="footer-section">
                <h3>–ì—Ä–∞—Ñ—ñ–∫ —Ä–æ–±–æ—Ç–∏</h3>
                <p>–ü–Ω-–ü—Ç: 10:00 - 22:00</p>
                <p>–°–±-–ù–¥: 11:00 - 23:00</p>
            </div>
            <div class="footer-section">
                <h3>–°–ª—ñ–¥–∫—É–π—Ç–µ –∑–∞ –Ω–∞–º–∏</h3>
                <div class="social-links">
                    <a href="#" class="social-link">Facebook</a>
                    <a href="#" class="social-link">Instagram</a>
                    <a href="#" class="social-link">Telegram</a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 –°—É—à—ñ-–ú–∞–π—Å—Ç–µ—Ä. –í—Å—ñ –ø—Ä–∞–≤–∞ –∑–∞—Ö–∏—â–µ–Ω—ñ.</p>
        </div>
    </footer>

    <script type="module">
        import { menuService } from '/front/js/api.js';
        import { updateHeader } from '/front/js/header.js';

        // Load header
        fetch('/front/components/header.html')
            .then(response => response.text())
            .then(html => {
                document.getElementById('header-placeholder').innerHTML = html;
                updateHeader();
            });

        // Menu filtering functionality
        const filterButtons = document.querySelectorAll('.filter-btn');
        const menuGrid = document.getElementById('menuGrid');
        let currentCategory = 'all';

        filterButtons.forEach(button => {
            button.addEventListener('click', () => {
                // Update active button
                filterButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');

                // Update current category and reload menu
                currentCategory = button.dataset.category;
                loadMenu();
            });
        });

        async function loadMenu() {
            try {
                const menuItems = await menuService.getMenuItems();
                const filteredItems = currentCategory === 'all'
                    ? menuItems
                    : menuItems.filter(item => item.category === currentCategory);

                menuGrid.innerHTML = filteredItems.map(item => `
                    <div class="menu-item">
                        <img src="${item.image}" alt="${item.name}" class="menu-item-image">
                        <div class="menu-item-content">
                            <h3>${item.name}</h3>
                            <p class="description">${item.description}</p>
                            <div class="menu-item-footer">
                                <span class="price">${item.price} ‚Ç¥</span>
                                <button class="btn btn-primary add-to-cart" data-id="${item.id}">
                                    –î–æ–¥–∞—Ç–∏ –≤ –∫–æ—à–∏–∫
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('');

                // Add event listeners to add-to-cart buttons
                document.querySelectorAll('.add-to-cart').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const itemId = e.target.dataset.id;
                        // TODO: Implement add to cart functionality
                        console.log('Add to cart:', itemId);
                    });
                });
            } catch (error) {
                console.error('Error loading menu:', error);
                menuGrid.innerHTML = '<p class="error-message">–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–µ–Ω—é. –°–ø—Ä–æ–±—É–π—Ç–µ –ø—ñ–∑–Ω—ñ—à–µ.</p>';
            }
        }

        // Initial menu load
        loadMenu();
    </script>
</body>

</html>